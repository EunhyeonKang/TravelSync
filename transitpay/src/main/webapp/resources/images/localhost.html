<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:8080/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <link rel="stylesheet" href="./localhost_files/index.css">
    <link rel="stylesheet" href="./localhost_files/main2.css">
    <script defer="" src="./localhost_files/index.js"></script>
    <script src="./localhost_files/jquery-latest.min.js"></script>
    <script src="./localhost_files/kakao.min.js"></script>
    <style>
        .login{
            text-align: center;
            display: inline-block;
        }
        .login img{
            width: 150px;
            margin: 0 auto;
        }
        #phone-number, #auth-number{
            width: 70%;
            height: 50px;
            float: left;
            display: flex;
            border: 1px solid #f9fafc;
            background-color: #ffffff;
            mix-blend-mode: normal;
            box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
            border-radius: 10px;
            margin: 10px 0 5px 0;
        }
        .confirm-button{
            height: 50px;
            width: 25%;
            float: right;
            border: 1px solid #0bb2a2;
            background-color:#0bb2a2;
            mix-blend-mode: normal;
            color: white;
            box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
            border-radius: 10px;
            margin: 10px 0 14px 0;
        }
        .authbox{
            width: 100%;
        }
        #auth-req-button{
            height: 50px;
            width: 25%;
            float: right;
            border: 1px solid #0bb2a2;
            background-color: #0bb2a2;
            mix-blend-mode: normal;
            color: white;
            box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
            border-radius: 10px;
            margin: 10px 0 14px 0;
        }
        .phone-container{
            width: 100%;
            text-align: center;
            margin-top: 30px;
        }
        input::placeholder{
            text-align: center;
        }
        .button-container:hover{
            transform:scale(1.01);
            transition: transform .2s;
        }
        .main-2 p{
            text-align: right;
            padding-right: 50px;
            font-weight: normal;
            color: #9E9E9E;
        }

        .loginbox{
            height: 240px;
            margin-top: 20px;
        }

        .loginafter {
            width: 80%;
            height: 160px;
            background-color: white;
            margin: 0 auto;
            border-radius: 10px;
            box-shadow: 1px 2px 12px 0px rgba(0, 0, 0, 0.25);
            padding-top: 30px;
        }
        #hanaloginbox  .logout{
            float: right;
            border: 0;
            background: 0;
            margin-right: 50px;
            padding-top: 20px;
            font-weight: normal;
            color: #9E9E9E;
        }
        .hanabox{
            width: 80%;
            margin: 0 auto;
        }

        .hana-1{
            display: flex;
            width: 100%;
            float: left;
            height: 20px;
            color: #8b8b8b;
            font-weight: 700;
            align-items: center;
        }

        .hanamoney-1{
            width: 100%;
            display: flex;
            width: 100%;
            display: flex;
            height: 70px;
            font-weight: 700;
            padding-top: 10px;
            font-size: 40px;
            align-items: center;
            color: #000000;
        }

        .hanawon{
            float: left;
            display: flex;
        }
        .hanawon-1{
            float: left;
            display: flex;
            margin: 10px;
        }

        .hana-1 img{
            width: 40px;
            height: 40px;
            margin-right: 5px;
            border-radius: 50%;
        }
        .seemore > .seemore-1{
            color: #0ec1b1;
            align-items: center;
            width: 100%;
            float: right;
            text-align: right;
            margin: 0;
        }
        .notification{
            border-radius: 50%;
            background: #ff0049;
            width: 17px;
            height: 17px;
            padding: 3px 2px 1px 2px;
            color: white;
            display: block;
            bottom: 10px;
            float: right;
            line-height: 18px;
            font-weight: 800;
            position: relative;
            font-size: 15px;
        }
        .t1{
            color: #ff6400;
        }
        .kakaoa .kakao_btn{
            width: 40px;
            margin: 10px;
            float: left;
        }



        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 20% auto;
            padding: 20px;
            width: 400px;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
            border-radius: 20px;
        }


        .close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
        }
        .selecloc-1, .selecloc-2{
            box-sizing: border-box;
            height: 50px;
            border: 1px solid #0073681c;
            border-radius: 26px;
            text-align: center;
            margin: 0 auto;
            margin-right: 5px;
            margin-left: 5px;
            color: white;
            font-size: 18px;
            font-weight: 700;
            box-shadow: rgba(0, 0, 0, 0.18) 0px 13px 24px 0px, rgba(0, 0, 0, 0.08) 0px -6px 9px 0px inset;
        }
        .selecloc-1{
            background: #0bb2a2;
        }
        .selecloc-2{
            background: #d91717c4;
        }
        #notificationDropdown {
            display: none; /* 초기에는 드롭다운 숨김 */
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            /* 기타 스타일 속성을 여기에 추가할 수 있습니다. */
        }
        .signup,.login{
            cursor: pointer;
        }
        .signup:hover,.login:hover{
            color: #008485;
        }
    </style>
</head>
<body>
    <div class="main-1">
        <header>
            <div class="nav">
                <a class="title" href="http://localhost:8080/">
                    <img src="./localhost_files/img-hana-symbol.png" style="width: 40px">
                    <p>하나 트래블싱크</p>
                </a>
                <ul class="menu">
                    
                        
                            <li><a href="http://localhost:8080/categoryTravel">여행정보 보기</a></li>
                            <li><a href="http://localhost:8080/group">모임통장 개설</a></li>
                            <li><a href="http://localhost:8080/travel">여행계획</a></li>
                        
                        
                    

                </ul>
                <i class="totalmenu"></i>
            </div>
        </header>
        <div class="navbar-fixed">
            <div class="title"><a href="http://localhost:8080/">TRAVELSYNC</a></div>
            <ul id="menu">
                <li><a href="http://localhost:8080/top3Travel">TOP 여행지</a></li>
                <li><a href="http://localhost:8080/mypage">내예약</a></li>
                <li><a href="http://localhost:8080/login">로그인</a></li>
            </ul>
        </div>
        <hr class="navhr">
        <div class="box-container">
            <div class="main">
                <div class="mainBox1">
                    <div class="leftBox">
                        <div class="leftContent" style="transition: left 1s cubic-bezier(0.39, 0.575, 0.565, 1) 0ms; left: 0px; padding: 3px; font-weight: bolder; opacity: 1;">
                            하나 트래블싱크
                        </div>
                        <div class="leftContent" style="transition: left 1s cubic-bezier(0.39, 0.575, 0.565, 1) 150ms; left: 0px; padding: 3px; font-weight: bolder; opacity: 1;">
                            여행 모임 통장
                        </div>
                        <div class="leftContent-2" style="transition: left 1s cubic-bezier(0.39, 0.575, 0.565, 1) 300ms; left: 0px; padding: 3px; font-weight: bolder; opacity: 1;">
                            실시간 일정, 함께하는 여행이 더 쉬워집니다
                        </div>
                        <div class="leftContent-2" style="transition: left 1s cubic-bezier(0.39, 0.575, 0.565, 1) 450ms; left: 0px; padding: 3px; font-weight: bolder; opacity: 1;">
                            모임은 FUN하게 통장은 편하게
                        </div>
                        <button class="mytravel" onclick="location.href=&#39;travel&#39;" style="transition: left 1s cubic-bezier(0.39, 0.575, 0.565, 1) 600ms; left: 0px; padding: 3px; font-weight: bolder; opacity: 1;">여행일정 짜러가기</button>
                    </div>
                    <div class="rightContent show">
                        <div class="cardContainer">
                        </div>
                    </div>
                </div>
            </div>
            <div class="main-2">
                    <ul class="hanamenu">
                        <li><a class="hanamenu-a" id="mypage">마이페이지</a></li>
                        <li><a href="http://localhost:8080/travel" class="hanamenu-a">여행계획</a></li>
                        <li><a class="hanamenu-a" id="noti">알림<span class="notification">1</span></a>
                            <div id="notificationDropdown" class="dropdown-content">
                                <!-- 알림 내용이 여기에 추가됩니다. -->
                            </div>
                        </li>
                    </ul>
                    <hr>
                    <div class="loginbox">
                        <div id="hanaloginbox">
                            
                                
                                <div class="loginafter">
                                    <div class="hanabox">
                                        <div class="hana-1">
                                            
                                                
                                                
                                                    <img src="./localhost_files/img_640x640.jpg">
                                                
                                            
                                                강은현님 모임통장
                                        </div>
                                        <div class="hanamoney-1">
                                            <div class="hanawon">540,000원</div>
                                            <div class="hanawon-1"></div>
                                        </div>
                                        <div class="seemore">
                                            <a class="seemore-1" href="http://localhost:8080/mypage">연결 계좌</a>
                                        </div>
                                    </div>
                                </div>
                                <button class="logout" onclick="performLogout();">로그아웃</button>
                             
                                
                            
                        </div>
                    </div>
                    <hr>
                    <ul class="hanamenu">
                        <li>
                            <a href="http://localhost:8080/mypage" class="hanamenu-a"><img src="./localhost_files/new_2204_my_login_ico001.png" alt=""><span class="hanameneSpan">계좌관리</span></a>
                        </li>

                        <li><a href="http://localhost:8080/mygroup/137" class="hanamenu-a"><img src="./localhost_files/new_2204_my_login_ico004.png" alt=""><span class="hanameneSpan">모임통장</span></a></li>
                        <li><a href="http://localhost:8080/travel" class="hanamenu-a"><img src="./localhost_files/new_2204_my_login_ico003.png" alt=""><span class="hanameneSpan">여행관리</span></a></li>
                    </ul>
                </div>
            </div>
        </div>
    

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <h2>이용 선택</h2>
            <button class="selecloc-1" onclick="location.href=&#39;/mypage/&#39;">인증서로 한번에 계좌연동</button>
            <button class="selecloc-2" onclick="location.href=&#39;/mygroup/&#39;+groupSid;">내 모임통장으로 가기</button>
        </div>
    </div>
    

<div class="main2box">
    <div class="main2-2">
        <div class="parent">
            <div class="first">
                <a href="http://localhost:8080/">
                    <div class="img">
                        <img src="./localhost_files/groupicon.png" style="" alt="">
                    </div>
                    <div class="t_wrap">
                        <p class="titlename">HANA모임통장</p>
                        <p class="name">둘이, 셋이, 여럿이 함께쓰고<br>같이 보는 모임통장을 사용해보세요</p>
                    </div>
                </a>
            </div>
            <div class="first">
                <a href="http://localhost:8080/">
                    <div class="img">
                        <img src="./localhost_files/travelSchedule.png" style="" alt="">
                    </div>
                    <div class="t_wrap">
                        <p class="titlename">실시간 여행계획</p>
                        <p class="name">모임원들과 실시간 일정계획으로<br>효율적인 여행경비를 계산하세요</p>
                    </div>
                </a>
            </div>
            <div class="first">
                <a href="http://localhost:8080/">
                    <div class="img">
                        <img src="./localhost_files/main2.jpeg" style="" alt="">
                    </div>
                    <div class="t_wrap">
                        <p class="titlename">여행경비 리포트</p>
                        <p class="name">여행예산을 1/N정산하고<br>정산통계로 현명한 여행소비를 하세요</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <div class="populbox">
        <p class="populsearch">인기검색어</p>
        <div class="popul-2"><table class="table"><thead><tr></tr></thead><tbody><tr class="popcountbox"><td class="popcount">1</td><td class="popkeyword">서울 성동구</td></tr><tr class="popcountbox"><td class="popcount">2</td><td class="popkeyword">서울 용산구</td></tr><tr class="popcountbox"><td class="popcount">3</td><td class="popkeyword">경기도 가평군</td></tr><tr class="popcountbox"><td class="popcount">4</td><td class="popkeyword">경기도 파주시</td></tr><tr class="popcountbox"><td class="popcount">5</td><td class="popkeyword">인천 옹진군</td></tr><tr class="popcountbox"><td class="popcount">6</td><td class="popkeyword">서울 강동구</td></tr><tr class="popcountbox"><td class="popcount">7</td><td class="popkeyword">경기도 포천시</td></tr><tr class="popcountbox"><td class="popcount">8</td><td class="popkeyword">경기도 남양주시</td></tr><tr class="popcountbox"><td class="popcount">9</td><td class="popkeyword">서울 중랑구</td></tr><tr class="popcountbox"><td class="popcount">10</td><td class="popkeyword">경기도 오산시</td></tr></tbody></table></div>
        <div class="popul-1">
            <img class="populimg" src="./localhost_files/invite.png">
        </div>
    </div>
</div>
<div class="main2">
    <div class="ttext">
        <div class="ctext1">총무님은 쉬세요</div><br>
        <div class="ctext1"><span class="t1"> 트래블싱크</span>가 대신할게요.</div>
    </div>
    <div class="mtext">
        <div class="ctext2">회비 낼 때 알림으로 알려주고</div><br>
        <div class="ctext2">회비가 밀려도 알아서 관리할게요.</div>
    </div>
    <div class="bbutton">
        <button type="submit" class="tbutton" onclick="location.href = &#39;group&#39;">
            <div class="tTrable">모임통장 개설하기</div>
        </button>
    </div>s
</div>
<div class="main3">
    <div class="exchangebox1">
        <button type="submit" class="exchgbutton">
            <div class="exchgtext">정산</div>
        </button>
        <button type="submit" class="exchgbutton">
            <div class="exchgtext">알림</div>
        </button>
    </div>
    <div class="exchangebox2">
        <img class="exchgimg" src="./localhost_files/exchange.png">
        <div class="ctext2">나의 여행 기반으로 제공되는</div><br>
        <div class="ctext2">환율, 길찾기 정보로 더 쉬운 여행을 경험하세요.</div>
    </div>

</div>




    <title></title>
    
    <style>
        #wrap {
            min-height: 50vh;
            position: relative;
            width: 100%;
        }
        footer {
            width: 100%;
            height: 110px; /* 내용물에 따라 알맞는 값 설정 */
            bottom: 0px;
            position: absolute;
        }
        img{
            width: 100%;
        }
    </style>


<div id="wrap">
    <footer>
    <img src="./localhost_files/footer.png">
    </footer>
</div>


<script>
    // let currentIndex = 0;
    // const slides = document.querySelectorAll('.exchange-slide');
    //
    // function showSlide(index) {
    //     slides.forEach(slide => {
    //         slide.style.display = 'none';
    //     });
    //     slides[index].style.display = 'block';
    // }
    //
    // function nextSlide() {
    //     currentIndex = (currentIndex + 1) % slides.length;
    //     showSlide(currentIndex);
    // }
    //
    // setInterval(nextSlide, 3000); // Change slide every 3 seconds

    // 요소들을 찾습니다.
    const ttext = document.querySelector('.ttext');
    const mtext = document.querySelector('.mtext');
    const bbutton = document.querySelector('.bbutton');

    // Intersection Observer 생성
    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show');
                observer.unobserve(entry.target); // 관찰 중지
            }
        });
    });
    // 요소들을 관찰
    observer.observe(ttext);
    observer.observe(mtext);
    observer.observe(bbutton);

    // 환율데이터
    /*
    $(function(){
        getConnection();

    })
    function getConnection(){
        ws = new WebSocket("ws://localhost:8080" + '/exchange-rate');
        // 서버 시작할 때 동작
        ws.onopen = function(event){
        }
        // 서버로부터 메세지를 전달 받을 때 동작하는 메소드

        // 아래에 선언 할 onMessage로 event가 전달된다.
        ws.onmessage = function(event){
            onMessage(event);
        }

        // 서버에서 에러가 발생할 경우 동작할 메소드
        ws.onerror = function(event){
            onError(event);
        }

        // 서버와의 연결이 종료될 경우 동작하는 메소드
        ws.onclose = function(event){
            onClose(event);
        }
    }
    // 전달할 String형 msg를 ws.send를 통해서 소켓으로 전달한다.

    function send(msg){
        ws.send(msg);
    }
    // 소켓통신 에러 발생 시
    function onError(event){
        alert(event.data);
    }
    // 소켓통신이 끝났을 때
    function onClose(event){
        alert(event);
    }
    function onMessage(event){
        alert(event.data);
    }*/
    function searchLocation(){
        $.ajax({
            type: "POST",
            url: "/searchLocation",
            success: function (searchData, state, xhr) {
                var h2 = document.createElement('h2');
                h2.textContent = "인기검색어";
                h2.className='popul'
                var $searchList = $("<table class='table'></table>"); // 결과를 표시할 테이블
                var maxRows = 5; // 최대 행 수
                var maxColumns = 2; // 최대 열 수
                var itemCounter = 0; // 아이템 카운터

                for (var i = 0; i < maxRows; i++) {
                    var $currentRow = $("<tr></tr>");

                    for (var j = 0; j < maxColumns; j++) {
                        if (itemCounter >= searchData.length) {
                            break; // 검색 결과가 10개 미만인 경우에 대한 처리
                        }

                        var searchItem = searchData[itemCounter];
                        var $column = $("<td></td>");
                        var $item = $("<button class='dropdown-item'></button>");
                        var $countBadge = $("<span class='count-badge'></span>");
                        var $itemText = $("<span class='item-text'></span>");

                        // 카운팅 숫자 스타일 적용
                        $countBadge.text(itemCounter + 1);

                        // 아이템 텍스트 설정
                        $itemText.text(searchItem.search_keyword);

                        $item.append($countBadge);
                        $item.append($itemText);

                        // 클로저를 사용하여 searchItem 값을 전달
                        $item.on('click', (function (selectedItem) {
                            return function () {
                                var selectedValue = selectedItem.search_keyword;
                                // 선택한 아이템 조회하기
                                // 받아온 장소의 세부 정보를 사용하여 UI 업데이트
                                // ...

                                searchInput.value = selectedValue;
                                searchDropdown.innerHTML = ''; // 드롭다운 닫기
                            };
                        })(searchItem));

                        $column.append($item);
                        $currentRow.append($column);
                        itemCounter++;
                    }

                    $searchList.append($currentRow);
                }
                searchDropdown.appendChild(h2);
                searchDropdown.appendChild($searchList.get(0));
            },
            error: function (xhr, data) {
                // 오류 처리 로직 추가
            }
        });
    }
    $.ajax({
        type: "POST",
        url: "/searchLocation",
        success: function (searchData, state, xhr) {
            console.log(searchData);
            var h2 = document.createElement('h2');
            h2.textContent = "인기검색어";
            h2.className = 'popul';

            var $searchList = $("<table class='table'></table>"); // 결과를 표시할 테이블

            var itemCounter = 0; // 아이템 카운터

            // 테이블 헤더 추가
            var $thead = $("<thead><tr></tr></thead>");
            $searchList.append($thead);

            for (var i = 0; i < 10; i++) {
                var $currentRow = $("<tr class='popcountbox'></tr>");
                var searchResult = searchData[itemCounter];
                $currentRow.append("<td class='popcount'>" + (i + 1) + "</td>"); // 순위 추가
                $currentRow.append("<td class='popkeyword'>" + searchResult.search_keyword + "</td>");
                itemCounter++;
                $searchList.append($currentRow);
            }

            // 결과를 원하는 요소에 추가
            $("#resultContainer").append(h2);
            $("#resultContainer").append($searchList);

            // 검색 결과를 추가할 요소에도 추가
            $(".popul-2").html($searchList);
        },
        error: function (xhr, data) {
            // 오류 처리 로직 추가
        }
    });


</script>


<script>
    $('#noti').click(function(){
        if(false) {
            alert("로그인하세요");
        }else{
            location.href='/calTravel';
        }
    })
    $('#mypage').click(function(){
        if(false) {
            alert("로그인하세요");
        }else{
            location.href='/mypage';
        }
    })

    if(false) {
        var signup = document.querySelector('.signup');
        signup.addEventListener('click', (e) => {
            location.href = '/join';
        })
        var login = document.querySelector('.login');
        login.addEventListener('click', (e) => {
            location.href = '/login';
        })
    }

    fetchNotifications();

    function fetchNotifications() {
        $.ajax({
                type: "POST",
                url: "/selectNotification",
                success: function (response) {
                    if(response.length==0){
                        return;
                    }else {
                        response.forEach(function(item){
                            var hananoti = document.getElementById('noti');
                            var noti = document.createElement('span');
                            noti.className = 'notification';
                            noti.textContent = response.length;
                            hananoti.appendChild(noti);
                            var dataToSend = {
                                groupId : item.group_id,
                                travelId : item.travel_id
                            };
                            $.ajax({
                                url: '/selectTravelNoti',
                                method: "POST",
                                data: JSON.stringify(dataToSend),
                                contentType: "application/json; charset=UTF-8",
                                success: function (response) {
                                    console.log(response);
                                },
                                error: function (error) {
                                    console.error("Error occurred:", error);
                                }
                            });
                        })
                    }
                },
                error: function (error) {
                console.error(error);
            },
        });
    }
    // Get the modal and button elements
    const modal = document.getElementById('myModal');
    const openModalBtn = document.getElementById('openModalBtn');
    const closeModalBtn = document.querySelector('.close');

    // Function to open the modal
    function openModal() {
        modal.style.display = 'block';
    }

    // Function to close the modal
    function closeModal() {
        modal.style.display = 'none';
    }

    closeModalBtn.addEventListener('click', closeModal);
    window.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModal();
        }
    });


    const groupSid ="137";
    var memberId = "65";
    var phone = "01093660469";

    if(groupSid!="" && memberId!=""){
        //계좌 존재 여부
        $.ajax({
            url:'/selectBackAccount',
            method: "POST",
            success: function(response) {
                if(response!=""){
                    //계좌가 있음, 모임통장 접속
                }else{
                    //계좌가 없음
                    var seemore =  document.querySelector('.seemore-1');
                    seemore.textContent = '계좌연동';
                    seemore.href='/account'

                    $.ajax({
                        type: "POST",
                        url: "/insertHanaAccount",
                        success: function (response) {

                        },
                        error: function (error) {
                            console.error(error);
                        },
                    });
                    // location.href='/account';
                    // openModal();
                }
            },
            error: function(error) {
                console.error("Error occurred:", error);
            }
        });
        //그룹에 초대된 회원
        //1.계좌연동 여부(acocunt)
        //2.모임통장 가입동의 여부
        //3.초대된 모임통장 접속
    } else if(!(groupSid!="" && memberId!="")){

        //그룹에 초대되지 않은 비회원
        //1.로그인
        //2.모임장이될 수 있음
    }

    function performLogout() {
        // Kakao 로그아웃 URL 설정
        var kakaoLogoutUrl = "https://kauth.kakao.com/oauth/logout?client_id=951e0627da48ee51855b252517b6352d&logout_redirect_uri=http://localhost:8080/logout";
        // Kakao 로그아웃 URL로 리다이렉트
        window.location.href = kakaoLogoutUrl;
    };
    function performLogin() {
        // 새로운 URL로 이동
        window.location.href = 'https://kauth.kakao.com/oauth/authorize?client_id=951e0627da48ee51855b252517b6352d&redirect_uri=http://localhost:8080/api/social/login/kakao&response_type=code';
    };


    /*
    // 핸드폰 인증
    const authReqButton= document.querySelector('#auth-req-button');
    const authResButton= document.querySelector('#auth-res-button');

    var authCode="";

    authReqButton.onclick=()=>{
        const phoneNumberObj= document.querySelector('#phone-number');
        let phoneNumber = phoneNumberObj.value;
        $.ajax({
            type:"get",
            url:"/checkPhoneLogin",
            data:{
                "phoneNumber" : phoneNumber
            },
            dataType:"text",
            success:function(data){
                authCode= data;
            },error:function(data){
                alert ('실패');
            }
        })
    }
    authResButton.onclick=()=>{
        const authnumberobj=document.querySelector('#auth-number');
        let authNumber=authnumberobj.value;
        if(authNumber==authCode){
            alert("인증성공");
            location.href='signup';
        }else{
            alert("인증실패");
        }
    }

*/
    async function selectGroupAccount(groupIdList){
        var memberId = "65";
        if(memberId!="") {
            //모임통장 여러개 ,,, 이건 나중에 수정...
            groupIdList.forEach(function (val) {
                var groupId = val.group_id;
                $.ajax({
                    type: "POST",
                    url: "/selectUseTypeAccount",
                    data: {memberId: memberId, groupId: groupId},
                    success: function (response) {

                        // if(response!=null){
                        //     location.href='/mygroup/'+response.group_id;
                        // }else{
                        //     location.href='/mygroup';
                        // }
                    },
                    error: function (error) {
                        console.error("그룹 계정 업데이트 중 오류 발생: " + error);
                    }
                });
            })
            let result = 0;

            for (let index = 0; index < groupIdList.length; index++) {
                const groupId = groupIdList[index].group_id;

                try {
                    const response = await $.ajax({
                        url: '/selectGroupAccountInfo',
                        data: { memberId: memberId, groupId: groupId },
                        method: "POST",
                    });
                    result += response.g_balance;
                } catch (error) {
                    console.error("그룹 계정 정보 가져오기 중 오류 발생: " + error);
                }
            }

            const hanawon = document.querySelector('.hanawon');
            if (result !== -1) {
                hanawon.textContent = result.toLocaleString() + '원';
            } else {
                hanawon.textContent = '모임통장 개설';
            }

        }
    }
    // 페이지가 로드되면 애니메이션 및 메뉴바 처리 시작
    window.onload = function() {
        if("Member(member_id=65, email=rkddmsgus1@daum.net, name=강은현, phone=01093660469, join_date=2023-09-12 00:00:00, kakao_img=http://k.kakaocdn.net/dn/b8XagJ/btssTqJHXWP/y9huItKDndOduWJJEY7S3K/img_640x640.jpg, kakao_id=3014365184, groupId=0, groupName=null, birth=null, pw=null, code=YR2SEPG8, recode=null, count=0)"!="") {
            $.ajax({
                type: "POST",
                url: "/JoinGroupAccountAndMemberAccount",
                success: function (response) {
                    if (response != "") {
                        selectGroupAccount(response);
                        //2. 모임통장이 있으면 모임통장 경로로 이동
                    } else {
                        //1. 모임통장 개설하러가기

                    }
                },
                error: function (error) {
                    // 오류 처리
                }
            })
        }
        var groupId = "137";
        if("137"!="" && groupId !=""){
            $.ajax({
                type: "POST",
                url: "/selectGroupMember",
                data: {groupId: groupId},
                success: function (response) {
                    console.log(response + " selectGroupMember");
                },
                error: function (error) {
                }
            });
        }
        // rightContent 요소를 찾습니다.
        const rightContent = document.querySelector('.rightContent');

        // rightContent 요소에 show 클래스를 추가하여 천천히 나타나는 애니메이션을 시작합니다.
        rightContent.classList.add('show');
        // 왼쪽 컨텐츠들에 대한 애니메이션 적용
        var contents = document.querySelectorAll('.leftContent, .leftContent-2, .mytravel');
        var animationDelay = 150; // 애니메이션 간격 (0.5초)

        for (var i = 0; i < contents.length; i++) {
            contents[i].style.transition = "left 1.0s cubic-bezier(.39, .575, .565, 1.000)";
            contents[i].style.left = "0";
            contents[i].style.padding = "3px";
            contents[i].style.fontWeight = 'bolder';
            contents[i].style.opacity = "1";
            contents[i].style.transitionDelay = animationDelay * i + "ms";
        }

        // 스크롤 이벤트를 감지하여 메뉴바를 추가/제거하는 함수
        var navbarFixed = document.querySelector('.navbar-fixed');
        function handleScroll() {
            if (window.pageYOffset >= 600) {
                navbarFixed.style.display = 'flex'; // 메뉴바를 보이도록 설정
            } else {
                navbarFixed.style.display = 'none'; // 메뉴바를 숨기도록 설정
            }
        }

        // 스크롤 이벤트를 바인딩
        window.addEventListener('scroll', handleScroll);

        // 페이지 로딩 시 한 번 실행하여 초기 상태를 설정
        // handleScroll();
        // tid = setInterval(msg_time, 1000);
    };



    // 타이머
    /*
    var SetTime = 120; // 최초 설정 시간(기본 : 초)

    function msg_time() {
        var targetElement = document.getElementById('ViewTimer');

        if (!targetElement) {
            console.error("Element with ID 'ViewTimer' not found.");
            return;
        }

        m = Math.floor(SetTime / 60) + "분 " + (SetTime % 60) + "초";
        var msg = "현재 남은 시간은 <font color='red'>" + m + "</font> 입니다.";
        targetElement.innerHTML = msg;

        SetTime--;

        if (SetTime < 0) {
            clearInterval(setInterval(msg_time, 1000));
            //alrt('종료')
        }
    }*/



</script>


</body></html>